{"version":3,"sources":["webpack:///./src/modules/js/api.js","webpack:///./src/pages/cart/cart.js"],"names":["url","hotLists","banner","topList","subList","rank","searchList","details","deal","addCart","cartList","cartReduce","cartRemove","cartMrremove","addressList","addressAdd","addressRemove","addressUpdate","addressSetDefault","key","hasOwnProperty","Object","defineProperty","__webpack_exports__","value","__WEBPACK_IMPORTED_MODULE_0__cart_css__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_1__cart_base_css__","n","__WEBPACK_IMPORTED_MODULE_2__cart_trade_css__","__WEBPACK_IMPORTED_MODULE_3_vue__","__WEBPACK_IMPORTED_MODULE_4_js_api_js__","__WEBPACK_IMPORTED_MODULE_5_axios__","__WEBPACK_IMPORTED_MODULE_5_axios___default","__WEBPACK_IMPORTED_MODULE_6_velocity_animate__","__WEBPACK_IMPORTED_MODULE_6_velocity_animate___default","Vue","el","data","cartLists","total","editingShop","editingShopIndex","removePopup","removeData","removeMsg","methods","getCartLists","_this","this","axios","get","then","res","lists","forEach","shop","checked","removeChecked","editing","editingMsg","goodsList","goods","selectGoods","attr","every","selectShop","selectAll","edit","shopIndex","item","i","reduce","number","post","id","add","remove","goodIndex","removeList","removeLists","length","removeConfirm","_this2","_removeData","fetch","splice","removeShop","ids","push","arr","findIndex","start","e","startX","changedTouches","clientX","end","good","endX","left","Volecity","$refs","removeCancel","computed","allSelected","set","newVal","allRemoveSelected","selectLists","price","created","filters","toFixed"],"mappings":"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","file":"static/js/cart.44ba691b719371413404.js","sourcesContent":["let url = {\r\n    hotLists: '/index/hotLists',\r\n    banner: '/index/banner',\r\n    topList: '/category/topList',\r\n    subList: '/category/subList',\r\n    rank: '/category/rank',\r\n    searchList: '/search/list',\r\n    details: '/goods/details',\r\n    deal: '/goods/deal',\r\n    addCart: '/cart/add',\r\n    cartList: '/cart/list',\r\n    cartReduce: '/cart/reduce',\r\n    cartRemove: '/cart/remove',\r\n    cartMrremove: '/cart/mrremove',\r\n    addressList: '/address/list',\r\n    addressAdd: '/address/add',\r\n    addressRemove: '/address/remove',\r\n    addressUpdate: '/address/update',\r\n    addressSetDefault: '/address/setDefault'\r\n}\r\n\r\n// 开发环境和真实环境的切换\r\n\r\n// 开发环境\r\n// let host = 'http://rap2api.taobao.org/app/mock/7058'\r\nlet host = 'https://easy-mock.com/mock/5cdf9e46ca410e607a1193b3/youzan'\r\n\r\n\r\n// 真实环境\r\n// let host = ''\r\n\r\nfor (const key in url) {\r\n    if (url.hasOwnProperty(key)) {\r\n        url[key] = host + url[key]\r\n    }\r\n}\r\n\r\nexport default url\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/api.js","import './cart.css'\r\nimport './cart_base.css'\r\nimport './cart_trade.css'\r\n\r\nimport Vue from 'vue'\r\nimport url from 'js/api.js'\r\nimport axios from 'axios'\r\nimport Volecity from 'velocity-animate'\r\n\r\nnew Vue({\r\n    el: '#app',\r\n    data: {\r\n        cartLists: null,\r\n        total: 0,\r\n        editingShop: null,\r\n        editingShopIndex: -1,\r\n        removePopup: false,\r\n        removeData: null,\r\n        removeMsg: ''\r\n    },\r\n    methods: {\r\n        getCartLists() {\r\n            axios.get(url.cartList).then(res => {\r\n                let lists = res.data.cartList\r\n                lists.forEach(shop => {\r\n                    shop.checked = true\r\n                    shop.removeChecked = false\r\n                    shop.editing = false\r\n                    shop.editingMsg = '编辑'\r\n                    shop.goodsList.forEach(goods => {\r\n                        goods.checked = true\r\n                        goods.removeChecked = false\r\n                    });\r\n                });\r\n                this.cartLists = lists\r\n            })\r\n        },\r\n        selectGoods(shop, goods) {\r\n            let attr = this.editingShop ? 'removeChecked' : 'checked'\r\n            goods[attr] = !goods[attr]\r\n            shop[attr] = shop.goodsList.every(goods => {\r\n                return goods[attr]\r\n            })\r\n        },\r\n        selectShop(shop) {\r\n            let attr = this.editingShop ? 'removeChecked' : 'checked'\r\n            shop[attr] = !shop[attr]\r\n            shop.goodsList.forEach(goods => {\r\n                return goods[attr] = shop[attr]\r\n            })\r\n        },\r\n        selectAll() {\r\n            let attr = this.editingShop ? 'allRemoveSelected' : 'allSelected'\r\n            this[attr] = !this[attr]\r\n        },\r\n        edit(shop, shopIndex) {\r\n            shop.editing = !shop.editing\r\n            shop.editingMsg = shop.editing ? '完成' : '编辑'\r\n            this.cartLists.forEach((item, i) => {\r\n                if (shopIndex !== i) {\r\n                    item.editing = false\r\n                    item.editingMsg = shop.editing ? '' : '编辑'\r\n                }\r\n            })\r\n            this.editingShop = shop.editing ? shop : null\r\n            this.editingShopIndex = shop.editing ? shopIndex : -1\r\n        },\r\n        reduce(goods) {\r\n            if (goods.number === 1) return\r\n            axios.post(url.cartReduce, {\r\n                id: goods.id,\r\n                number: 1\r\n            }).then(res => {\r\n                goods.number--;\r\n            })\r\n        },\r\n        add(goods) {\r\n            axios.post(url.addCart, {\r\n                id: goods.id,\r\n                number: 1\r\n            }).then(res => {\r\n                goods.number++;\r\n            })\r\n        },\r\n        remove(shop, shopIndex, goods, goodIndex) {\r\n            this.removePopup = true\r\n            this.removeData = { shop, shopIndex, goods, goodIndex }\r\n            this.removeMsg = '确定要删除该商品吗？'\r\n        },\r\n        removeList() {\r\n            this.removePopup = true\r\n            this.removeMsg = `确定将所选 ${this.removeLists.length} 个商品删除？`\r\n        },\r\n        removeConfirm() {\r\n            if (this.removeMsg === '确定要删除该商品吗？') {\r\n                let { shop, shopIndex, goods, goodIndex } = this.removeData\r\n                fetch(url.cartRemove, {\r\n                    id: goods.id\r\n                }).then(res => {\r\n                    shop.goodsList.splice(goodIndex, 1)\r\n                    if (!shop.goodsList.length) {\r\n                        this.cartLists.splice(shopIndex, 1)\r\n                        this.removeShop()\r\n                    }\r\n                    this.removePopup = false\r\n                })\r\n            } else {\r\n                let ids = []\r\n                this.removeLists.forEach(goods => {\r\n                    ids.push(goods.id)\r\n                })\r\n                axios.post(url.cartMrremove, {\r\n                    ids\r\n                }).then(res => {\r\n                    let arr = []\r\n                    this.editingShop.goodsList.forEach(goods => {\r\n                        let index = this.removeLists.findIndex(item => {\r\n                            return item.id == goods.id\r\n                        })\r\n                        if (index === -1) {\r\n                            arr.push(goods)\r\n                        }\r\n                    })\r\n                    if (arr.length) {\r\n                        this.editingShop.goodsList = arr\r\n                    } else {\r\n                        this.cartLists.splice(this.editingShopIndex, 1)\r\n                        this.removeShop()\r\n                    }\r\n                    this.removePopup = false\r\n                })\r\n            }\r\n        },\r\n        // removeConfirm() {\r\n        //     let { shop, shopIndex, goods, goodIndex } = this.removeData\r\n        //     axios.post(url.cartRemove, {\r\n        //         id: goods.id\r\n        //     }).then(res => {\r\n        //         shop.goodsList.splice(goodIndex, 1)\r\n        //         if (!shop.goodsList.length) {\r\n        //             this.cartLists.splice(shopIndex, 1)\r\n        //             this.removeShop()\r\n        //         }\r\n        //         this.removePopup = false\r\n        //     })\r\n        // },\r\n        removeShop() {\r\n            this.editingShop = null\r\n            this.editingShopIndex = -1\r\n            this.cartLists.forEach(shop => {\r\n                shop.editing = false\r\n                shop.editingMsg = '编辑'\r\n            })\r\n        },\r\n        start(e, goods) {\r\n            goods.startX = e.changedTouches[0].clientX\r\n        },\r\n        end(e, shopIndex, good, goodIndex) {\r\n            let endX = e.changedTouches[0].clientX\r\n            let left = '0'\r\n            if (good.startX - endX > 100) {\r\n                left = '-60px'\r\n            }\r\n            if (endX - good.startX > 100) {\r\n                left = '0px'\r\n            }\r\n            Volecity(this.$refs[`goods-${shopIndex}-${goodIndex}`], {\r\n                left\r\n            })\r\n        },\r\n        removeCancel() {\r\n            this.removePopup = false\r\n        }\r\n    },\r\n    computed: {\r\n        allSelected: {\r\n            get() {\r\n                if (this.cartLists && this.cartLists.length) {\r\n                    return this.cartLists.every(shop => {\r\n                        return shop.checked\r\n                    })\r\n                }\r\n                return false\r\n            },\r\n            set(newVal) {\r\n                this.cartLists.forEach(shop => {\r\n                    shop.checked = newVal\r\n                    shop.goodsList.forEach(goods => {\r\n                        goods.checked = newVal\r\n                    })\r\n                })\r\n            }\r\n        },\r\n        allRemoveSelected: {\r\n            get() {\r\n                if (this.editingShop) {\r\n                    return this.editingShop.removeChecked\r\n                }\r\n                return false\r\n            },\r\n            set(newVal) {\r\n                if (this.editingShop) {\r\n                    this.editingShop.removeChecked = newVal\r\n                    this.editingShop.goodsList.forEach(goods => {\r\n                        goods.removeChecked = newVal\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        selectLists() {\r\n            if (this.cartLists && this.cartLists.length) {\r\n                let arr = []\r\n                let total = 0\r\n                this.cartLists.forEach(shop => {\r\n                    shop.goodsList.forEach(goods => {\r\n                        if (goods.checked) {\r\n                            arr.push(goods)\r\n                            total += goods.price * goods.number\r\n                        }\r\n                    });\r\n                })\r\n                this.total = total\r\n                return arr\r\n            }\r\n            return []\r\n        },\r\n        removeLists() {\r\n            if (this.editingShop) {\r\n                let arr = []\r\n                this.editingShop.goodsList.forEach(goods => {\r\n                    if (goods.removeChecked) {\r\n                        arr.push(goods)\r\n                    }\r\n                })\r\n                return arr\r\n            }\r\n            return []\r\n        }\r\n    },\r\n    created() {\r\n        this.getCartLists()\r\n    },\r\n    filters: {\r\n        number(price) {\r\n            return price.toFixed(2)\r\n\r\n        }\r\n    }\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cart/cart.js"],"sourceRoot":""}