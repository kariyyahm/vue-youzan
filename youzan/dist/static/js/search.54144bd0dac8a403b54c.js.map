{"version":3,"sources":["webpack:///./src/modules/js/api.js","webpack:///./src/pages/search/search.js"],"names":["url","hotLists","banner","topList","subList","rank","searchList","details","deal","addCart","cartList","cartReduce","cartRemove","cartMrremove","addressList","addressAdd","addressRemove","addressUpdate","addressSetDefault","key","hasOwnProperty","Vue","use","__WEBPACK_IMPORTED_MODULE_1_mint_ui_lib_infinite_scroll___default","a","qs","parse","location","search","substr","keyword","id","el","data","isShow","allLoaded","loading","pageNum","pageSize","subData","methods","getSearchList","_this","this","axios","get","then","res","curSearchList","lists","length","concat","move","document","documentElement","scrollTop","toTop","Velocity","body","duration","created","filters","number","price","toFixed"],"mappings":"yHAAA,IAAIA,GACAC,SAAU,kBACVC,OAAQ,gBACRC,QAAS,oBACTC,QAAS,oBACTC,KAAM,iBACNC,WAAY,eACZC,QAAS,iBACTC,KAAM,cACNC,QAAS,YACTC,SAAU,aACVC,WAAY,eACZC,WAAY,eACZC,aAAc,iBACdC,YAAa,gBACbC,WAAY,eACZC,cAAe,kBACfC,cAAe,kBACfC,kBAAmB,uBAWvB,IAAK,IAAMC,KAAOnB,EACVA,EAAIoB,eAAeD,KACnBnB,EAAImB,GAPD,0CAOenB,EAAImB,IAIfnB,yQCzBfqB,UAAIC,IAAJC,EAAAC,SAEsBC,IAAGC,MAAMC,SAASC,OAAOC,OAAO,IAAhDC,YAASC,OAEf,IAAIV,WACAW,GAAI,OACJC,MACI3B,WAAY,KACZ4B,QAAQ,EACRC,WAAW,EACXC,SAAS,EACTC,QAAS,EACTC,SAAU,EACVC,QAAS,MAGbC,SACIC,cADK,WACW,IAAAC,EAAAC,KACRA,KAAKR,YACTQ,KAAKP,SAAU,EACfQ,IAAMC,IAAI7C,IAAIM,YACVwB,QAASA,EACTC,GAAIA,EACJM,QAASM,KAAKN,QACdC,SAAUK,KAAKL,WAChBQ,KAAK,SAAAC,GACJ,IAAIC,EAAgBD,EAAId,KAAKgB,MAEzBD,EAAcE,OAASR,EAAKJ,WAC5BI,EAAKP,WAAY,GAEjBO,EAAKpC,WACLoC,EAAKpC,WAAaoC,EAAKpC,WAAW6C,OAAOH,GAGzCN,EAAKpC,WAAa0C,EAEtBN,EAAKN,SAAU,EACfM,EAAKL,cAGbe,KAzBK,WA0BGC,SAASC,gBAAgBC,UAAY,IACrCZ,KAAKT,QAAS,EAEdS,KAAKT,QAAS,GAGtBsB,MAhCK,WAiCDC,IAASJ,SAASK,KAAM,UAAYC,SAAU,QAGtDC,QAhDI,WAiDAjB,KAAKF,iBAEToB,SACIC,OADK,SACEC,GACH,OAAOA,EAAMC,QAAQ","file":"static/js/search.54144bd0dac8a403b54c.js","sourcesContent":["let url = {\r\n    hotLists: '/index/hotLists',\r\n    banner: '/index/banner',\r\n    topList: '/category/topList',\r\n    subList: '/category/subList',\r\n    rank: '/category/rank',\r\n    searchList: '/search/list',\r\n    details: '/goods/details',\r\n    deal: '/goods/deal',\r\n    addCart: '/cart/add',\r\n    cartList: '/cart/list',\r\n    cartReduce: '/cart/reduce',\r\n    cartRemove: '/cart/remove',\r\n    cartMrremove: '/cart/mrremove',\r\n    addressList: '/address/list',\r\n    addressAdd: '/address/add',\r\n    addressRemove: '/address/remove',\r\n    addressUpdate: '/address/update',\r\n    addressSetDefault: '/address/setDefault'\r\n}\r\n\r\n// 开发环境和真实环境的切换\r\n\r\n// 开发环境\r\nlet host = 'http://rap2api.taobao.org/app/mock/7058'\r\n\r\n// 真实环境\r\n// let host = ''\r\n\r\nfor (const key in url) {\r\n    if (url.hasOwnProperty(key)) {\r\n        url[key] = host + url[key]\r\n    }\r\n}\r\n\r\nexport default url\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/api.js","import 'css/common.css'\r\nimport './search.css'\r\n\r\nimport Vue from 'vue'\r\nimport axios from 'axios'\r\nimport qs from 'qs'\r\nimport url from 'js/api.js'\r\nimport Velocity from 'velocity-animate'\r\nimport { InfiniteScroll } from 'mint-ui'\r\n\r\nVue.use(InfiniteScroll);\r\n\r\nlet { keyword, id } = qs.parse(location.search.substr(1))\r\n\r\nnew Vue({\r\n    el: '#app',\r\n    data: {\r\n        searchList: null,\r\n        isShow: false,\r\n        allLoaded: false,\r\n        loading: false,\r\n        pageNum: 1,\r\n        pageSize: 6,\r\n        subData: null\r\n\r\n    },\r\n    methods: {\r\n        getSearchList() {\r\n            if (this.allLoaded) return\r\n            this.loading = true\r\n            axios.get(url.searchList, {\r\n                keyword: keyword,\r\n                id: id,\r\n                pageNum: this.pageNum,\r\n                pageSize: this.pageSize\r\n            }).then(res => {\r\n                let curSearchList = res.data.lists\r\n                // 判断数据是否加载完毕\r\n                if (curSearchList.length < this.pageSize) {\r\n                    this.allLoaded = true\r\n                }\r\n                if (this.searchList) {\r\n                    this.searchList = this.searchList.concat(curSearchList)\r\n                } else {\r\n                    // 初始化列表\r\n                    this.searchList = curSearchList\r\n                }\r\n                this.loading = false\r\n                this.pageNum++;\r\n            })\r\n        },\r\n        move() {\r\n            if (document.documentElement.scrollTop > 100) {\r\n                this.isShow = true\r\n            } else {\r\n                this.isShow = false\r\n            }\r\n        },\r\n        toTop() {\r\n            Velocity(document.body, 'scroll', { duration: 700 })\r\n        }\r\n    },\r\n    created() {\r\n        this.getSearchList()\r\n    },\r\n    filters: {\r\n        number(price) {\r\n            return price.toFixed(2)\r\n        }\r\n    }\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search/search.js"],"sourceRoot":""}